import pg from "pg";

import {
  DB_HOST,
  DB_PORT,
  DB_USERNAME,
  DB_PASSWORD,
  DB_DATABASE,
  USERTABLE,
} from "./settings";

const pool = new pg.Pool({
  user: DB_USERNAME,
  host: DB_HOST,
  database: DB_DATABASE,
  password: DB_PASSWORD,
  port: DB_PORT,
});

export async function validateLogin(
  username: string,
  password: string
): Promise<boolean> {
  // eslint-disable-next-line prettier/prettier
  const query = `SELECT * FROM ${USERTABLE} WHERE username = $1 AND password = $2`;
  const result = await pool.query(query, [username, password]);
  return result.rowCount > 0;
}
