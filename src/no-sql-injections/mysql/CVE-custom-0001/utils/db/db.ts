import mysql from "mysql";

import {
  DB_HOST,
  DB_PORT,
  DB_USERNAME,
  DB_PASSWORD,
  DB_DATABASE,
  USERTABLE,
} from "./settings";

const dbConnection = mysql.createConnection({
  host: DB_HOST,
  port: DB_PORT,
  user: DB_USERNAME,
  database: DB_DATABASE,
  password: DB_PASSWORD,
  multipleStatements: true,
});

export async function validateLogin(
  username: string,
  password: string
): Promise<boolean> {
  const query = `SELECT * FROM ${USERTABLE} WHERE username = ${username} AND password = ${password}`;
  const result = await dbConnection.query(query);
  return result.values ? true : false;
}
